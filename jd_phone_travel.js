/*
活动名称：五一出游季

cron:1 1 1 1 * jd_phone_travel.js
*/

const $ = new Env('五一出游季')
var iｉl='jsjiami.com.v7';const iIiII=iii1II;(function(iiilil,iil1li,lillIl,iIiIl,iiilii,li1i1i,IlIli1){return iiilil=iiilil>>0x7,li1i1i='hs',IlIli1='hs',function(illIiI,lI1lli,Ill1l,llI1Il,ii1iii){const lI1lll=iii1II;llI1Il='tfi',li1i1i=llI1Il+li1i1i,ii1iii='up',IlIli1+=ii1iii,li1i1i=Ill1l(li1i1i),IlIli1=Ill1l(IlIli1),Ill1l=0x0;const i11iil=illIiI();while(!![]&&--iIiIl+lI1lli){try{llI1Il=parseInt(lI1lll(0x1af,')w7('))/0x1+-parseInt(lI1lll(0x280,'Gs3('))/0x2+parseInt(lI1lll(0x1c6,'%9#C'))/0x3*(parseInt(lI1lll(0x2bf,'0fVr'))/0x4)+parseInt(lI1lll(0x1ff,'S8fy'))/0x5+parseInt(lI1lll(0x1eb,'R!@9'))/0x6+parseInt(lI1lll(0x255,'pL6y'))/0x7+parseInt(lI1lll(0x1ce,'wBmv'))/0x8*(-parseInt(lI1lll(0x1f2,'Vb74'))/0x9);}catch(Ill1i){llI1Il=Ill1l;}finally{ii1iii=i11iil[li1i1i]();if(iiilil<=iIiIl)Ill1l?iiilii?llI1Il=ii1iii:iiilii=ii1iii:Ill1l=ii1iii;else{if(Ill1l==iiilii['replace'](/[HlTLGFNBuYOrXIJnw=]/g,'')){if(llI1Il===lI1lli){i11iil['un'+li1i1i](ii1iii);break;}i11iil[IlIli1](ii1iii);}}}}}(lillIl,iil1li,function(ii1iil,lllI1l,i11iii,llI1Ii,lllI1i,li1i1l,II1i1){return lllI1l='\x73\x70\x6c\x69\x74',ii1iil=arguments[0x0],ii1iil=ii1iil[lllI1l](''),i11iii=`\x72\x65\x76\x65\x72\x73\x65`,ii1iil=ii1iil[i11iii]('\x76'),llI1Ii=`\x6a\x6f\x69\x6e`,(0x1654f4,ii1iil[llI1Ii](''));});}(0x6180,0xb89c3,Iii11l,0xc5),Iii11l)&&(iｉl=`\xba4`);const jdCookie=require('./jdCookie'),common=require(iIiII(0x225,'nLh8')),notify=require(iIiII(0x243,'3iAG')),getToken=require(iIiII(0x1a4,'VcNV')),isNotify=![];let domains=iIiII(0x284,'D@z5'),cookie='',activityCookie='',originCookie='';function iii1II(_0x3a587e,_0xc647f3){const _0x532baa=Iii11l();return iii1II=function(_0x3b51cd,_0x1c96b7){_0x3b51cd=_0x3b51cd-0x181;let _0x355345=_0x532baa[_0x3b51cd];if(iii1II['QBbQGd']===undefined){var _0x15274f=function(_0x59b47e){const _0x27fd14='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5c4556='',_0x5e90fa='';for(let _0x21cfbb=0x0,_0x2ab408,_0x179786,_0x3f785d=0x0;_0x179786=_0x59b47e['charAt'](_0x3f785d++);~_0x179786&&(_0x2ab408=_0x21cfbb%0x4?_0x2ab408*0x40+_0x179786:_0x179786,_0x21cfbb++%0x4)?_0x5c4556+=String['fromCharCode'](0xff&_0x2ab408>>(-0x2*_0x21cfbb&0x6)):0x0){_0x179786=_0x27fd14['indexOf'](_0x179786);}for(let _0x25bb8e=0x0,_0x3578f5=_0x5c4556['length'];_0x25bb8e<_0x3578f5;_0x25bb8e++){_0x5e90fa+='%'+('00'+_0x5c4556['charCodeAt'](_0x25bb8e)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5e90fa);};const _0x1fc216=function(_0x69e89c,_0x581c53){let _0x3f9594=[],_0x80b88f=0x0,_0x447757,_0x51de56='';_0x69e89c=_0x15274f(_0x69e89c);let _0x74b0e1;for(_0x74b0e1=0x0;_0x74b0e1<0x100;_0x74b0e1++){_0x3f9594[_0x74b0e1]=_0x74b0e1;}for(_0x74b0e1=0x0;_0x74b0e1<0x100;_0x74b0e1++){_0x80b88f=(_0x80b88f+_0x3f9594[_0x74b0e1]+_0x581c53['charCodeAt'](_0x74b0e1%_0x581c53['length']))%0x100,_0x447757=_0x3f9594[_0x74b0e1],_0x3f9594[_0x74b0e1]=_0x3f9594[_0x80b88f],_0x3f9594[_0x80b88f]=_0x447757;}_0x74b0e1=0x0,_0x80b88f=0x0;for(let _0x3405e1=0x0;_0x3405e1<_0x69e89c['length'];_0x3405e1++){_0x74b0e1=(_0x74b0e1+0x1)%0x100,_0x80b88f=(_0x80b88f+_0x3f9594[_0x74b0e1])%0x100,_0x447757=_0x3f9594[_0x74b0e1],_0x3f9594[_0x74b0e1]=_0x3f9594[_0x80b88f],_0x3f9594[_0x80b88f]=_0x447757,_0x51de56+=String['fromCharCode'](_0x69e89c['charCodeAt'](_0x3405e1)^_0x3f9594[(_0x3f9594[_0x74b0e1]+_0x3f9594[_0x80b88f])%0x100]);}return _0x51de56;};iii1II['fwOOPh']=_0x1fc216,_0x3a587e=arguments,iii1II['QBbQGd']=!![];}const _0x3f4033=_0x532baa[0x0],_0x9fc1a7=_0x3b51cd+_0x3f4033,_0x4af05b=_0x3a587e[_0x9fc1a7];return!_0x4af05b?(iii1II['VvDCFm']===undefined&&(iii1II['VvDCFm']=!![]),_0x355345=iii1II['fwOOPh'](_0x355345,_0x1c96b7),_0x3a587e[_0x9fc1a7]=_0x355345):_0x355345=_0x4af05b,_0x355345;},iii1II(_0x3a587e,_0xc647f3);}function Iii11l(){const ii1il1=(function(){return[...[iｉl,'HrIBjsOYjJiYlNaYmruOiLJT.ncXomH.Xv7wTGrF==','WPFdHIRdN8kB','kmouCmkGsa','WO3dLJO','hL7cLahdI2tcQYlcIG','5A+y5OQv5lIL5yM8WRG','W5tcNg/cOSo8DGXocwLhgSkr','yCk6omo1gG','W7xdLJDOWPJcLSkaBNhdNxzPWP4','CNrpW4tcUW','W55/n2r8xmkloq','d8oBCfG3e8oZEmo/W6XzACoHWR4','yg3dJSoqWQy','W4K8WRTsW4O','ahqXWOn4','WO1TW7OsAG','5yAG5OU45y6/5OIG5yQbWRxOJ5VLVA3VVl0','z3GZWOZcUW','sKCjWQ/cTSk+B3ZcRrWyWQlcVmo6yf7cPZBcMCoizCkSW5vRjmkRWPrfW4NcIHdcR0hcPwf5W4y8z8kyamk2uSk/BISw','W4NdN0CnyNddQ8kUhdRcNCkszW','WQFdSSkruMG','FcC4W5JcNJNcNCksWRpdQSkrW7VcLmkrWQ/dV2NdL3JdNbi','wMxcNxRcGei','ASokW7W','5OMp5Awt6i++5B6V77YM8kkYKH3NQBFMSO8','tmoYWQGNgG','EYC7WPm','nSolzIr2aCkwvColgmk1W70','yMb1W4ZcQ0NcRSoOns0nCCkddSoc','mGqPwv1ocMO','W7BcMCk7WRW2W7rVbSoDW73cQSoBxW','W5OOumkoE8kmWRmb','fSoqW7W','5yEa5OMn5yYM5OIR5yQq','wSohWRS','AfdcOYxdJa','zCk3lmoKoW','W7S0ECkuEW','gmoNW5P5lmoSWRW','yhHbu2a','zM5H','W5u0r8kn','W7hcV8k/zG','AvXFyNdcIMBdV8kdWOy','WQnTySoDW64','x23dSmo0WPS0','Cq9WeHVdOCoEW5LXpZK','WPetWQ5hdSke','o3zFDCoLtCkg','g8ousWL0','WP5xWPzlWRO/','rh1T','fmoax34d','WOj3iejz','o3ihWQO','4P6Ur+IhLEACN+I+Q+IIU+MdMUwlIEs6S+MxNUIUHHe','W6fmW4ewWQm','tSkgxMypzeqbWO7cT8osntJcUtrtW7X6WOjukCkZkG','rfnPWPVdUq','5OMp5AwK6i2p5B6777+u','WO0sWRT1f8kwW7O','nSoQWRRcPa','WQ3cSXbWja','vCoIW4TACq','WRvcW6eJvCk1','W7ZcR8kRWRqR','jmo3WRFcP8kg','W7GcvCk3tq','h8oaxd94cSkm','mcKGWOlcNh/cMCkAWQq','EbHWcX7cSSkfWO9upZRcHha0xmkIgtFcMCo1Fmk0bCkoW4RcTsjaW5hcJuZcK8kez8oocSovtYHfW6fAbmoma8owf8kFo8kPhs8rW6DNl8klAYJdQmonxrXgy0/cQvLrztRcHCk7W5e','dCoNW5n2h8o0WQRdMCoLqa','DmkEhSoybW','5ys55OUf5y2E5OUA5yQdW4dOJklLVypVVzy','shlcIfhcGuG5WRa','WR7cTSorsW','WOhdN8oRifBcML7cRCkoW5/dLu7cS8kFh1zAW7FcQmksavC3Fmk6gSkwWO9XyY5c','uv9uWOdcKCoXDgddVWjlWR3dQSoUo0ZcVJBcQSo0lmkWW4uUEmo/W51oW4tdNGxdTXxcSdu','zanVhGpdL8oEW5Luka','WQn+ymoaW59XkmkKW7Gyw3Kp','W47dS8oqWO/dKq','pmoGWR/cUCkgWPGQ','WQFdOaK','WPpOR6lMS4FLPBpOT7zn4P+vWQ4','WO3dISoRmq','vCohWRurpa','WRX5wmoSW4u','hXBcHahdVxZcUx7cSWhcVNz1W7qRfsDWW4PgW43cRuhdI8ksqSkZ','WO7dHdddSa','WQRcMbjmhsJcS8kG','rhtcJ33cLfyS','W59Xia','imoQWRxcUmknW5C','ebOUAvK','WRtcUmogySo3WRddKmoWEmkEWPNdPSkHcCoO','WOFdISoYnq','W73cK8kO','W6BcU8k4C0S8dG','oSory3mw','WOdcTr4kbq','zCo5WO8AcG','W5r7m2r7vmkFpa','nhWtWOXhtW','W7ldNCkPf38','veZdOSkAWOK','m8ofrSkixSkhWQxdMqSOW6/cRCke','g8orzq','i8oKWRFcQq'],...(function(){return[...['44gU5O2E56Ao44cj6k635yEi6i2Y5y27W4DdzCoSWQtdRG','q3xcQghcNLqN','yNZcHZZdSa','W40zWPzIW67cSf8JF8kyW5W','WOfzWPfCWPWIcW','WOhdHINdISk9p0v5','AcK8WOi','WQxcJIn4ma','W7BcOSk0yM0S','W70WkSoiW6OgWO/dRXpdMxFdMG','WOVcIau2ea','oCoCBcbD','W4ZdQCorWQBdJmo3','W79iihPm','W7xdHSkWg3/cGLjYlW','Cmkdhmohda','tSouyeqRe8oTy8o5W58fnCkL','eSoCrvCiBa','xeRcLG','pSouzqb6','W4ejWOu','5RAx5yUs5zoV56E7776c5lMn5lIR6zI+5yEq5RUs5A+tW6a','WPlcMba','W4BcGCkczLW','5RAU5yM45zoC56EZ77Yd5lUD5lMG6zIg5yAo5RUG5A2R','pM/dJmk+WOqrW6m','ExBdMCk+WQHmWQn3WQekW5vNW7RcLCohxeCzW4K1W5H7bgjzyalcKCo3iColW51As8o6W5PyWRNdMftcOCkesINdNrXzW5z7WRu','WPDaWOPdWRW','4P+qC+IfK+AEGEI9IEIGUEMcL+wkQ+s7UUMwQ+IVVCk+','jx1GF8oGD8kCW57dGSoj','gCoxqLiH','WPFdHdtdOq','Ag98D3q','WPXWja','Bx87WRPMvwK','Fv3cNHZdNG','WRdcTSos','lCoZs8kvACkFW7dcPHmDW4LqWQW','Fw3dIG','WOlcRGK','ESkOjNuCWQuRkLWrfSkFW5q','WQv4ymoaW557pCkZ','gCobzJDNbW','CaidWRhcSa','W7hdLGhcQmoilrCyzSkVFCosv8ksW49PWPldVhlcTIjDs08tW7FcTXPaW5ZcJgu','oSoRDWPH','ALPeCxVcSMhdUmkx','sM3dU8oUWQeYW73cLmk2oG','hCohB8k9DG','WOnhWPDyWQ8','EK7cLr3dUG','WQ7dRSol','WQJcHwS8','W7ddJbhcVCod','W6ddM8k6','dZdcRmkZW49/WQFcI8k4exhcP04','emoVW5L9','5A+h5OQl5lUU5yUSCG','W5rvW7OetmoeW7xcSNtcQI9o','WQldHmoMghq','5OIo5Awd6iYY5B+v77+j','famTx2zC','WPpcHba','DY00WPlcKslcGa','WPrBWPryWQSL','kCo3s8kPDa','5PYc6ioV6i695y2y55A75OUx6yUx5P+a5l2V5OcN','5P+U6ioM6i6J5y2j55Ac5OI16yI55P6v5l2g5OcE','WP5QlG','WPT2fKHoh0by','rNlcPI/dHW','W5f6W6e7','D8oqW7r8xW','WO4iWQG','WONdOmkrFgC','vmo3W65pFq','s3hdSSofWPaI','W5GUva','EgTVWRtdGW','WPVdLSoLW4LPWQ0G5B205Awj44ke5lMO5lQH6lsw5y+c','WQTqW6iRrG','wgpcUMxcPmoC','emozW55cdW','EYCkWOlcLspcMa','WPivWQzjhG','WPBJGypMTBlLIixLNQNLNlxJG4e','W5qtWOX5W63cSayZwCkCWP7cG8k9WRZcHG8klSkFWRdcOCoqW7yk','W4JdM8kfaL8','WPhdKdldOCkO','W5vea1LU','mN1LFmoNtW','WPldK8khseS','DWLWjbNdQCozW4S','nMr9wmok','aCo2WRVcR8kTWOS0fq','ebyLxW','fEIVLoAXIEwqKEw4Pr8','xKzYWQ8','W40kWPjNW7hcUKOUq8kfW57dHCkKWRNcGWjkyCkEWRhdT8ohWRyxyXCnWPC9j0/dVv0','WP92lG','Fvr3xMq','6iYj5y2kWP/cT8onW7JcPamw5As26lsL7720','oSoKvSkWEq','W6FdICkgwvJdRcO','W4RdVComWOG','WRfqW44mqmkZW6dcNG','W4bWW7ebWRWciSoNW6i','5PYB6ioe6i2g5y6J55A85OIN6yQ+5PYs5lYa5Ocl77+D','WRZdNSkQDNldUaS'],...(function(){return['WPrSmq','W781WQ9hW5K','DJWWWPVcQZZcMSkgWQm','W4CkDSkixq','W7a8lG','xx7cL2VcMWW','DeTfA3tcSM0','WPRdGSo4pNRdLb7dTSkxW5O','px1S','W7xdJri','W5VcNCkQWPag','lCoSvSk6mmomW7hcSsOyW4zcWQBcQvGkW4C','WRNdJ8kkx3xdVai','w8oBWRS','WOhdKcNdVq','W4JMI4dLIy4','WORdTrxdGCkb','jSo5wa','WQ7cRmoBD8oRWR0','WRpcRmobDmoPWRJdMq','BMbYW70','yxBdSSk+WRiy','5yAt5OU25yY85OQf5yMw','ns8Rzwq','fWuLuxzWdMexea','5ywQ5OM95y2x5OIi5yQk','W6lcICkTWRW3W6z5hW','W6NcG2mTW7ddLCohwhFdT3D1WQNcHG','5REJ5yQl5zkC56Am77YO5lMo5lQA6zQF5ys35RUS5A6e','jN9CuSo0','W7tdJZpcT8o/','mSogthOO','6i6X5y2ZW4bCuCotWRRdKLRLPRpOT5C','uSoXWQyQpa','bJ1/W7RdUSkmW5dcRmoClCo0fmkQWONcL03dQ3jNW6m','W518W6yPWP0mjmoR','o8oWWQRcM8kpWOS+','W4b3ifvqqCkdiWa+','WOVcUqCu','W40kWPjUW7BcVwG1rmkEW5xcHmk6','W73dJsRcRmoAzfm','WQJcUmogwq','W4aUwmkawW','W63dQSkgcSkWW6hcHSoVvSkFWPRdQmk9','rvfIWQBdLgdcI8ogb1a','WP1lW5i7WQNdQbiwBmkLW6lcUCk0','ogfuASo8qCksW4i','WO4FWQjWnG','crn8W7JcNCoW','WOiKWRvYW6jCCmocW4eEmfldMW','WOfUieHUa1q','WOWsWQi','ACoqW69ouSozWRG','thn+W68','CCogW6XcBa','f8oNWOJcISkt','W7mMpCoRW7uuWRC','W4KGlmoFW5CuWR3dVG','W6WHimoxW7WQWRNdTrRdNq','DhddN8kHWQK','vwVdUW','jSoOCG','qwfvW77dOCkjW5NdPG','W4tdQ0rkymoMW64','WPpdKs/dVmkNivX6eG','rCodWRuphqtdPW','sg3dMSojWOC','W7BdH8kXgG','BY9wW6qxe0DwW5tcOZ3dHG','W70JoCoiW7CrWPpdTbldHNFdMSo+','mmoQWRdcUmk8WOK2bwpcVq','txZcOuVcRW','8k24Vr8','WOzYj05D','wmkruehdICoUvHW','pCoRWRRcUmkB','WQ9HjCoHW5izWRZdUa','WPnMpwDid0Py','WRHJWPX6WP4','hW5lW7tdQSoTn1RcPISyW6RcIW','WQaoWOzMgG','cryHtG','pxi8WQDbu0q','EhrOW5NcT0q','z8kuaCoIhCouW6ddKW','zmo6WQK4da','xxX5W6VdP8kJW4ZdRmoLiCoZ','DoAiGEwjOW','c09z','WO3dGc7dPSkOiva','xfJcGsRdS38','WPddLZtdR8kSgvT9bLq','A8oaW6H7x8oFWRO','F3W7WO7cRW','rx7cMW','WQ7cVmoer8oGWQRdIG','WQVcHxy','44gj5O+n56wz44oc6k+x5ywO6i6y5y+lW5BcOrtdUfNcTa','W5BdSmkojLq','WPSEWP9KcW','xcC7WOlcKt7cH8oyWOpdVmkpW7K','5Rsq5yQF5Awt54kO54Uz5lMB77Yc6k+/56Uj5zg95yE76k2y77+f','WQ1uW50kCa','xbrViYK','bConyW','kHWhksldOZZdJCkAWPz5DSkn','WPpdJdRdU8kwmLPOcL0'];}())];}())];}());Iii11l=function(){return ii1il1;};return Iii11l();};const cookiesArr=Object[iIiII(0x2b9,'%*$D')](jdCookie)[iIiII(0x1e2,'fLpr')](llliiI=>jdCookie[llliiI])[iIiII(0x219,'nM!C')](IilIiI=>IilIiI);!cookiesArr[0x0]&&($[iIiII(0x18f,'$vGk')]($[iIiII(0x290,'x7qX')],iIiII(0x1e3,'%9#C')),process[iIiII(0x1a8,'q)FV')](0x1));!(async()=>{const iil1lI=iIiII,i1i1I1={'LCfRx':'phone-travel-api','WQPwj':'d7j7tSzT','LdoiJ':function(IlII1,IiI11){return IlII1<IiI11;},'TKBMp':function(lli,liIlI){return lli+liIlI;},'NiGpN':function(lll,llli1){return lll(llli1);},'aliQU':function(iIli1i){return iIli1i();}};$[iil1lI(0x21a,'&#IN')]=iil1lI(0x272,'8SbU'),$[iil1lI(0x25d,'Vb74')]=i1i1I1[iil1lI(0x22f,'^L0B')],$[iil1lI(0x2a9,'l495')]=i1i1I1[iil1lI(0x288,'Nf^j')],notify[iil1lI(0x2b2,'X5^e')]({'title':$[iil1lI(0x28c,'fLpr')]});for(let iI1lii=0x0;i1i1I1[iil1lI(0x27b,'3iAG')](iI1lii,cookiesArr[iil1lI(0x21e,'whBm')]);iI1lii++){$[iil1lI(0x28d,'D@z5')]=i1i1I1[iil1lI(0x1df,'NOY[')](iI1lii,0x1),cookie=cookiesArr[iI1lii],originCookie=cookiesArr[iI1lii],common[iil1lI(0x2c2,'5&3e')](originCookie),$[iil1lI(0x209,'rX%%')]=i1i1I1[iil1lI(0x2af,'rUK4')](decodeURIComponent,common[iil1lI(0x1f7,'FHFT')](cookie,iil1lI(0x197,'8SbU'))),$['UA']=common['genUA']($[iil1lI(0x1bb,'wBmv')]),$[iil1lI(0x246,'N42T')]=notify[iil1lI(0x260,'PCJI')]($['index'],$[iil1lI(0x2b6,'0QHL')]),$[iil1lI(0x1a5,'5&3e')]='',console[iil1lI(0x27e,'8SbU')](iil1lI(0x2a7,'VwJz')+$[iil1lI(0x1cd,'0QHL')]+'】'+($[iil1lI(0x20b,'^L0B')]||$[iil1lI(0x245,'S8fy')])+iil1lI(0x1c1,'q)FV')),await i1i1I1['aliQU'](Main),common[iil1lI(0x1d8,'VcNV')]();if($[iil1lI(0x195,'QuT@')]||$[iil1lI(0x269,'nLh8')])break;await $['wait'](0x3e8);}isNotify&&notify['getMessage']()&&(notify['appendContent'](iil1lI(0x2ad,'wBmv')+$[iil1lI(0x25b,')w7(')]),await notify[iil1lI(0x1c5,'rUK4')]());})()[iIiII(0x299,'Nf^j')](IilIii=>$[iIiII(0x1b2,'m(Wr')](IilIii))[iIiII(0x212,'x7qX')](()=>$[iIiII(0x216,'PCJI')]());async function Main(){const iiiliI=iIiII,iI1lil={'vdQWD':function(l1lIi1,iIli1l){return l1lIi1!==iIli1l;},'Tzvsc':function(i1i1II,liiIIl){return i1i1II!==liiIIl;},'eIkVZ':iiiliI(0x213,'R!@9'),'RoFWP':iiiliI(0x1b1,'sTy7'),'aKMHs':function(iil1iI,IlIllI,il1i1I){return iil1iI(IlIllI,il1i1I);},'tqETC':iiiliI(0x2bd,'PB%u'),'wcwJR':function(lI1li1,iI11II){return lI1li1(iI11II);},'MwieR':iiiliI(0x2c3,'3iAG'),'ENOTR':iiiliI(0x29b,'lkxl'),'mmFoD':'get_user_info','qpbGH':iiiliI(0x1fb,'D5gy'),'bSwmG':'BrKML','oJVGD':iiiliI(0x25a,'3iAG'),'xuIXb':iiiliI(0x2b4,'&#IN'),'wmWHz':function(iIII1I,ilil1i){return iIII1I>=ilil1i;},'qxkfX':function(IlIIi,IiI1l){return IlIIi===IiI1l;},'ZeTFc':iiiliI(0x1d4,'%9#C'),'sGkeH':function(illlII,iIII11){return illlII>iIII11;},'fZDba':function(IiI1i,llll1){return IiI1i(llll1);},'KoyHQ':function(lil11l,i1i1Il){return lil11l(i1i1Il);}};try{if(iI1lil['Tzvsc'](iI1lil[iiiliI(0x262,'q)FV')],iI1lil['RoFWP'])){$['skipRun']=![],$['mapsign']=![],$[iiiliI(0x230,'9DLb')]='';if($[iiiliI(0x2a4,'nM!C')]||$[iiiliI(0x1ba,'wBmv')])return;$[iiiliI(0x18e,'0fVr')]=await iI1lil[iiiliI(0x1f3,'pL6y')](getToken,originCookie,domains);if(!$[iiiliI(0x259,'N42T')]){console['log'](iI1lil['tqETC']),$[iiiliI(0x1de,'(2r8')]['fix'](iiiliI(0x1a2,'(2r8'));return;}await iI1lil[iiiliI(0x1b8,'(2r8')](sendRequest,'auth');if($[iiiliI(0x194,'QuT@')]||$[iiiliI(0x1a6,'0QHL')]||$[iiiliI(0x24d,'PCJI')])return;if(!$[iiiliI(0x1c9,'l495')]){console['log'](iI1lil['MwieR']),$['message'][iiiliI(0x28e,'rUK4')](iI1lil[iiiliI(0x254,'8SbU')]);return;}$['get_user_info']='',await sendRequest(iI1lil[iiiliI(0x1a0,'D@z5')]);if($[iiiliI(0x1d5,'J8W*')]||$[iiiliI(0x228,'sTy7')]||$[iiiliI(0x1b4,'V@5k')])return;await $[iiiliI(0x25e,'hxuX')](0x3e8);if(!$['hasPrintActInfo']){if(iI1lil[iiiliI(0x226,'%*$D')]!==iI1lil[iiiliI(0x285,'Gs3(')])IliI11['log'](iiiliI(0x274,'wBmv')+i1ll);else{$[iiiliI(0x24a,'QuT@')]=!![];let lil11i='';for(let IlIIl of $['get_user_info']['pools']||[]){iI1lil['bSwmG']===iI1lil[iiiliI(0x283,'hxuX')]?iI1lil['vdQWD'](llIliI?.[iiiliI(0x267,'pL6y')][iiiliI(0x282,'9DLb')],0x0)?IlI1iI['log']('第'+Iillil[iiiliI(0x1a7,'*DTK')]+iiiliI(0x1fc,'0fVr')+l1lIli?.[iiiliI(0x2ac,'sTy7')][iiiliI(0x1dd,'Vb74')]+iiiliI(0x20c,'$vGk')+lIIiiI?.['prize']['prize_info'][iiiliI(0x289,'whBm')]):II1lil[iiiliI(0x27f,'q)FV')]('第'+IIli1l[iiiliI(0x287,'nM!C')]+iiiliI(0x20d,'*DTK')):lil11i+='\x20\x20'+IlIIl[iiiliI(0x290,'x7qX')]+'\x0a';}console[iiiliI(0x18a,'X5^e')]('活动名称：五一除出游季\x0a'),notify[iiiliI(0x1a9,')w7(')](iiiliI(0x270,'PCJI'));}}$['get_task']=[],await iI1lil['wcwJR'](sendRequest,iI1lil[iiiliI(0x1f5,'J8W*')]);for(let i1i1Ii of $[iiiliI(0x251,'*DTK')]||[]){if(iI1lil[iiiliI(0x19f,'X5^e')](i1i1Ii[iiiliI(0x1c8,'0QHL')],i1i1Ii['max_count']))continue;for(let lllii of(i1i1Ii?.[iiiliI(0x184,'hxuX')]||[])[iiiliI(0x298,'whBm')](iI11Ii=>iI11Ii[iiiliI(0x206,'hxuX')]==0x0)){iI1lil['qxkfX'](iiiliI(0x250,'$vGk'),iiiliI(0x26f,'PCJI'))?($[iiiliI(0x1ab,'QuT@')]=i1i1Ii,$[iiiliI(0x19c,'VwJz')]=lllii,await iI1lil[iiiliI(0x1ed,'Vb74')](sendRequest,iI1lil[iiiliI(0x25f,'S8fy')]),await $[iiiliI(0x277,'Vb74')](0x3e8)):lilIiI['log'](''+i1l1I['msg']);}}await iI1lil['wcwJR'](sendRequest,iI1lil['mmFoD']);if($[iiiliI(0x264,'PB%u')]||$[iiiliI(0x1b6,'(2r8')]||$['skipRun'])return;await $['wait'](0x3e8),$[iiiliI(0x256,'9DLb')]=$[iiiliI(0x23b,'lkxl')][iiiliI(0x241,'$vGk')],console[iiiliI(0x1e0,'N42T')]('共有抽奖'+$[iiiliI(0x279,'V@5k')]+'次');while(iI1lil['sGkeH']($[iiiliI(0x1b5,'sTy7')]--,0x0)){await iI1lil[iiiliI(0x2b1,'*DTK')](sendRequest,iiiliI(0x1dc,'3iAG')),await $[iiiliI(0x2b7,'rX%%')](0x3e8),$[iiiliI(0x1b0,'X5^e')]!==0x0&&(await iI1lil[iiiliI(0x293,'YcB!')](sendRequest,'map_sign'),await $[iiiliI(0x257,'0QHL')](0x3e8));}}else IIII11[iiiliI(0x296,'S8fy')](iiiliI(0x1f1,'0QHL')+i1illi[iiiliI(0x2c0,'PB%u')][iiiliI(0x220,'nLh8')]+iiiliI(0x191,'PCJI'));}catch(iI11Il){console['log'](iiiliI(0x223,'sTy7')+iI11Il);}}async function handleResponse(iIII1i,iil1i1){const li1i1I=iIiII,il1i11={'SGPRO':li1i1I(0x207,'9DLb'),'LxdpN':li1i1I(0x29a,'VcNV'),'YiRPX':function(IlIll1,IlIII){return IlIll1!==IlIII;},'twnva':li1i1I(0x18c,'VwJz'),'dzAFq':'TrREf','YKJGz':function(ilil1l,illlIi){return ilil1l===illlIi;},'nWjZO':li1i1I(0x28a,'3iAG'),'tYObv':li1i1I(0x183,')w7('),'CbVWp':li1i1I(0x190,'Vb74'),'tLeiT':function(I1lIii,IiI1I){return I1lIii===IiI1I;},'NvOgu':function(illlIl,i11ill){return illlIl!==i11ill;},'RoghN':'GGMJM','gvvBD':li1i1I(0x26b,'9DLb'),'ZKOLy':function(IIIIIi,IIIIIl){return IIIIIi===IIIIIl;},'AxYxU':li1i1I(0x276,'FHFT'),'EuJza':li1i1I(0x1f9,')w7('),'RXgNw':function(I1lIil,IIIl1i){return I1lIil!==IIIl1i;},'LOJOd':li1i1I(0x242,'lkxl'),'ebOGR':'map_sign','zZtXU':'yAFxz','oIFAy':'IdoCT','iFYyt':li1i1I(0x1e5,'sTy7')};try{if(il1i11[li1i1I(0x1fa,'%9#C')](il1i11[li1i1I(0x1cb,'V@5k')],il1i11[li1i1I(0x2bc,'R!@9')]))switch(iIII1i){case'get_user_info':if(iil1i1)il1i11['YKJGz'](il1i11[li1i1I(0x2aa,'x7qX')],il1i11[li1i1I(0x200,'0fVr')])?(lIIiil[li1i1I(0x27c,'QuT@')](li1i1I(0x294,'5&3e')+l1lIii?.['prize'][li1i1I(0x217,'R!@9')]+li1i1I(0x1da,'NOY[')+I11iI1?.[li1i1I(0x2be,'Nf^j')]['prize_info']['quota']),l1lIil['is_prize']=IiiIli[li1i1I(0x2c1,'D5gy')]):$['get_user_info']=iil1i1;else iil1i1[li1i1I(0x1bf,'Gs3(')]?console[li1i1I(0x18b,'D@z5')](''+iil1i1['msg']):($[li1i1I(0x1c3,'$vGk')]=!![],console[li1i1I(0x21f,'VcNV')]('❓'+iIII1i+'\x20'+JSON[li1i1I(0x266,'rUK4')](iil1i1)));break;case il1i11[li1i1I(0x1b9,'0QHL')]:if(iil1i1&&il1i11['tLeiT'](iil1i1[li1i1I(0x202,'N42T')],0x0))il1i11['NvOgu'](il1i11[li1i1I(0x1a1,'nLh8')],il1i11[li1i1I(0x24e,'FHFT')])?ll1li[li1i1I(0x29c,'V@5k')]('❌\x20未能正确处理\x20'+Illl1I+'\x20请求响应\x20'+(lliiiI['message']||lilil)):($[li1i1I(0x253,'rUK4')]=iil1i1[li1i1I(0x237,'QuT@')][li1i1I(0x261,'wBmv')],$[li1i1I(0x275,'X5^e')]=iil1i1[li1i1I(0x29f,'5&3e')]['token_type']);else iil1i1[li1i1I(0x1ea,'FHFT')]?il1i11[li1i1I(0x20f,'3iAG')](il1i11[li1i1I(0x218,'lkxl')],il1i11[li1i1I(0x2b5,'X5^e')])?(delete llIlll[li1i1I(0x222,'%9#C')],delete lliii1[li1i1I(0x297,'hxuX')][il1i11[li1i1I(0x22b,'(2r8')]]):console[li1i1I(0x1be,'nM!C')](''+iil1i1[li1i1I(0x26e,'S8fy')]):($[li1i1I(0x25c,'whBm')]=!![],console[li1i1I(0x193,'Nf^j')]('❓'+iIII1i+'\x20'+JSON['stringify'](iil1i1)));break;case'get_task':if(iil1i1)$['get_task']=iil1i1[li1i1I(0x196,'J8W*')];else iil1i1[li1i1I(0x26a,'3iAG')]?il1i11[li1i1I(0x2a2,'0fVr')](il1i11[li1i1I(0x2b3,'0fVr')],li1i1I(0x1c4,'nM!C'))?console['log'](''+iil1i1['msg']):l1l11l['log']('🚫\x20'+IilIil+li1i1I(0x23f,'5&3e')+l1iIi[li1i1I(0x1bd,'8SbU')]):console['log']('❓'+iIII1i+'\x20'+JSON[li1i1I(0x286,'R!@9')](iil1i1));break;case li1i1I(0x1aa,'D@z5'):if(iil1i1)console[li1i1I(0x24c,'VwJz')](li1i1I(0x291,'Gs3(')+$[li1i1I(0x2c0,'PB%u')]['title']+li1i1I(0x1d9,'N42T'));else iil1i1[li1i1I(0x26c,')w7(')]?console['log'](''+iil1i1['msg']):il1i11['YiRPX'](li1i1I(0x210,'pL6y'),il1i11['EuJza'])?IiiIii(IIlll,liliI[li1i1I(0x240,'YcB!')]):console[li1i1I(0x247,'*DTK')]('❓'+iIII1i+'\x20'+JSON['stringify'](iil1i1));break;case li1i1I(0x252,'%9#C'):if(iil1i1)il1i11[li1i1I(0x199,'rX%%')](iil1i1?.[li1i1I(0x22e,'0QHL')]['length'],0x0)?il1i11[li1i1I(0x1f8,'nM!C')](li1i1I(0x249,'rX%%'),il1i11[li1i1I(0x1fd,'NOY[')])?(console[li1i1I(0x27e,'8SbU')](li1i1I(0x227,'whBm')+iil1i1?.[li1i1I(0x2be,'Nf^j')]['prize_name']+'\x20x\x20'+iil1i1?.[li1i1I(0x221,'V@5k')][li1i1I(0x19a,'rX%%')][li1i1I(0x2a0,'(2r8')]),$[li1i1I(0x1c0,'VcNV')]=iil1i1[li1i1I(0x29d,'V@5k')]):IliI1I+='\x20\x20'+lI1Iii[li1i1I(0x1d3,'rX%%')]+'\x0a':console[li1i1I(0x214,'J8W*')](li1i1I(0x204,'V@5k'));else iil1i1[li1i1I(0x1ef,'Vb74')]?console['log'](''+iil1i1['msg']):console[li1i1I(0x20e,'$vGk')]('❓'+iIII1i+'\x20'+JSON['stringify'](iil1i1));break;case il1i11['ebOGR']:if(iil1i1)il1i11[li1i1I(0x22a,'S8fy')](iil1i1?.['prize']['length'],0x0)?il1i11[li1i1I(0x205,'$vGk')]===il1i11['oIFAy']?IllIIi[li1i1I(0x2a1,'sTy7')]('第'+IllIIl[li1i1I(0x233,'x7qX')]+li1i1I(0x19b,'R!@9')):console['log']('第'+iil1i1[li1i1I(0x1ec,'Vb74')]+li1i1I(0x235,'Nf^j')+iil1i1?.[li1i1I(0x221,'V@5k')][li1i1I(0x1ae,'%*$D')]+'\x20x\x20'+iil1i1?.['prize'][li1i1I(0x1bc,'wBmv')][li1i1I(0x2b0,'Vb74')]):console[li1i1I(0x186,'wBmv')]('第'+iil1i1[li1i1I(0x189,'YcB!')]+li1i1I(0x198,'Vb74'));else iil1i1['msg']?console[li1i1I(0x21f,'VcNV')](''+iil1i1['msg']):il1i11['YiRPX'](li1i1I(0x265,'*DTK'),il1i11['iFYyt'])?console[li1i1I(0x2a5,'^L0B')]('❓'+iIII1i+'\x20'+JSON[li1i1I(0x1c2,'Vb74')](iil1i1)):(i1lI['skipRun']=!![],IlI1l[li1i1I(0x1be,'nM!C')]('❓'+lilIil+'\x20'+i1l11['stringify'](i1l1li)));break;}else{II11Ii['log']('未能获取用户鉴权信息！'),II11Il[li1i1I(0x1db,'Vb74')][li1i1I(0x182,'V@5k')](il1i11[li1i1I(0x263,'9DLb')]);return;}}catch(ill11l){console['log']('❌\x20未能正确处理\x20'+iIII1i+li1i1I(0x2b8,'%*$D')+(ill11l[li1i1I(0x188,'R!@9')]||ill11l));}}async function sendRequest(I1lIiI){const illIii=iIiII,lllili={'sKEmh':'POST','MHdhr':illIii(0x215,'^L0B'),'RRuGC':illIii(0x23e,'Vb74'),'JQdVP':illIii(0x1d6,'pL6y'),'wKWZS':illIii(0x2ab,'hxuX'),'aIPML':illIii(0x2ae,')w7('),'ntpjO':illIii(0x2ba,')w7('),'bBOjT':illIii(0x18d,'Nf^j'),'jPHTH':illIii(0x239,'NOY['),'PBLTE':illIii(0x1fe,'NOY['),'qAJoa':illIii(0x238,'YcB!'),'FcPwb':illIii(0x201,'hxuX'),'RYDTp':function(IlIlll,IIIl1I){return IlIlll===IIIl1I;},'sssWt':illIii(0x21d,'9DLb'),'tlJur':function(iil1ii,IlIlli){return iil1ii+IlIlli;},'BiIUa':function(il1i1i,lil111){return il1i1i===lil111;},'LxkXD':function(i11ilI,ii1ii1,llllI){return i11ilI(ii1ii1,llllI);},'mSdWh':function(lllil1,iil1il){return lllil1===iil1il;},'OuJqN':illIii(0x1e8,'D5gy')};if($['runEnd']||$[illIii(0x181,'0fVr')])return;let IliiiI='https://xinrui-isv.isvjcloud.com',Ill11='',liiIII=lllili[illIii(0x185,'^L0B')];switch(I1lIiI){case lllili[illIii(0x2a6,'%*$D')]:IliiiI+=illIii(0x231,'hxuX'),Ill11=illIii(0x248,'0QHL')+$[illIii(0x21c,'X5^e')]+'&jd_source=01';break;case illIii(0x20a,'VwJz'):liiIII=lllili[illIii(0x1d7,'$vGk')],IliiiI+='/'+$[illIii(0x1cc,'i1&m')]+illIii(0x19d,'fLpr');break;case lllili[illIii(0x1d0,'whBm')]:liiIII=illIii(0x28b,'YcB!'),IliiiI+='/'+$[illIii(0x281,'lkxl')]+illIii(0x1f0,'3iAG');break;case lllili[illIii(0x29e,'3iAG')]:IliiiI+='/'+$[illIii(0x236,'N42T')]+'/do_task',Ill11=illIii(0x187,'N42T')+$['sub_task'][illIii(0x234,'pL6y')]+illIii(0x268,'FHFT');break;case illIii(0x22c,'D5gy'):IliiiI+='/'+$[illIii(0x1cf,'V@5k')]+illIii(0x271,'8SbU');break;case illIii(0x1f6,'*DTK'):IliiiI+='/'+$['act_type']+'/map_sign';break;default:console[illIii(0x24c,'VwJz')]('❌\x20未知请求\x20'+I1lIiI);return;}const li1i11={'url':IliiiI,'method':liiIII,'headers':{'Host':lllili['aIPML'],'Accept':lllili[illIii(0x24f,'q)FV')],'Accept-Encoding':lllili[illIii(0x1ee,'Nf^j')],'App-Key':$['appKey'],'Accept-Language':lllili[illIii(0x192,'Vb74')],'Content-Type':lllili[illIii(0x1e4,'rUK4')],'Origin':lllili[illIii(0x278,'R!@9')],'Referer':illIii(0x232,'&#IN'),'User-Agent':$['UA'],'X-Requested-With':lllili['FcPwb']},'body':Ill11,'timeout':0x7530};$['token']&&(lllili[illIii(0x224,'5&3e')](lllili[illIii(0x2a8,'D5gy')],lllili['sssWt'])?li1i11[illIii(0x23d,'0QHL')]['Authorization']=lllili['tlJur']($[illIii(0x23a,'&#IN')],$[illIii(0x1ac,'^L0B')]):(lilIl1[illIii(0x2bb,'V@5k')](i1l1ii[illIii(0x24b,'YcB!')],illIii(0x258,'x7qX')),i1l1['exit'](0x1)));lllili[illIii(0x1d2,'sTy7')](liiIII,lllili[illIii(0x2a3,'(2r8')])&&(delete li1i11[illIii(0x229,'0QHL')],delete li1i11['headers'][illIii(0x1e6,'hxuX')]);const iI11I1=0x1,il1i1l=await common[illIii(0x1e1,'QuT@')](li1i11);if(lllili['RYDTp'](il1i1l[illIii(0x295,'rX%%')],0xc8))lllili[illIii(0x1e9,'&#IN')](handleResponse,I1lIiI,il1i1l[illIii(0x1b7,'VcNV')]);else{if(il1i1l['status']===0x1a6)$['mapsign']=!![];else{if(lllili[illIii(0x22d,'VwJz')](il1i1l[illIii(0x21b,'sTy7')],0x193))console[illIii(0x2a5,'^L0B')](illIii(0x1e7,'NOY[')),$['skipRun']=!![];else{if(il1i1l['status']){if(illIii(0x1a3,'$vGk')!==lllili[illIii(0x211,'^L0B')])console[illIii(0x1be,'nM!C')](illIii(0x1ca,'Nf^j')+I1lIiI+'\x20请求失败\x20➜\x20'+il1i1l[illIii(0x273,'whBm')]);else{iIIIIi[illIii(0x208,'J8W*')]=!![];let ii1iiI='';for(let lllilI of I1iIl1[illIii(0x27d,'Nf^j')][illIii(0x23c,'PB%u')]||[]){ii1iiI+='\x20\x20'+lllilI[illIii(0x244,'Vb74')]+'\x0a';}II1Ii[illIii(0x203,'(2r8')](illIii(0x26d,')w7(')),i1ii[illIii(0x1c7,'wBmv')](illIii(0x19e,'D5gy'));}}}}}}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
