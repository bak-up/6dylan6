/*
活动名称：健康器械618盲盒惊喜等你拿

cron:1 1 1 1 *
*/

const $ = new Env('健康器械618盲盒惊喜等你拿 6.20')
var iｉl='jsjiami.com.v7';const il1i1i=iii1II;function iii1II(_0x1149a7,_0x5da22b){const _0xcec1e2=Iii11l();return iii1II=function(_0x5d6004,_0xd692c6){_0x5d6004=_0x5d6004-0x146;let _0x234ca5=_0xcec1e2[_0x5d6004];if(iii1II['VFyGdJ']===undefined){var _0x2a25f1=function(_0x2488c7){const _0x3887c3='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x585a9b='',_0x4b3492='';for(let _0xd1312f=0x0,_0x5f1105,_0x634ee1,_0x3cf3ba=0x0;_0x634ee1=_0x2488c7['charAt'](_0x3cf3ba++);~_0x634ee1&&(_0x5f1105=_0xd1312f%0x4?_0x5f1105*0x40+_0x634ee1:_0x634ee1,_0xd1312f++%0x4)?_0x585a9b+=String['fromCharCode'](0xff&_0x5f1105>>(-0x2*_0xd1312f&0x6)):0x0){_0x634ee1=_0x3887c3['indexOf'](_0x634ee1);}for(let _0xd5427c=0x0,_0x1cfc73=_0x585a9b['length'];_0xd5427c<_0x1cfc73;_0xd5427c++){_0x4b3492+='%'+('00'+_0x585a9b['charCodeAt'](_0xd5427c)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4b3492);};const _0x1d3c51=function(_0x411669,_0x3c94cf){let _0xc84afe=[],_0x275762=0x0,_0x418e6e,_0x4d8d10='';_0x411669=_0x2a25f1(_0x411669);let _0x38ec8b;for(_0x38ec8b=0x0;_0x38ec8b<0x100;_0x38ec8b++){_0xc84afe[_0x38ec8b]=_0x38ec8b;}for(_0x38ec8b=0x0;_0x38ec8b<0x100;_0x38ec8b++){_0x275762=(_0x275762+_0xc84afe[_0x38ec8b]+_0x3c94cf['charCodeAt'](_0x38ec8b%_0x3c94cf['length']))%0x100,_0x418e6e=_0xc84afe[_0x38ec8b],_0xc84afe[_0x38ec8b]=_0xc84afe[_0x275762],_0xc84afe[_0x275762]=_0x418e6e;}_0x38ec8b=0x0,_0x275762=0x0;for(let _0x138d9b=0x0;_0x138d9b<_0x411669['length'];_0x138d9b++){_0x38ec8b=(_0x38ec8b+0x1)%0x100,_0x275762=(_0x275762+_0xc84afe[_0x38ec8b])%0x100,_0x418e6e=_0xc84afe[_0x38ec8b],_0xc84afe[_0x38ec8b]=_0xc84afe[_0x275762],_0xc84afe[_0x275762]=_0x418e6e,_0x4d8d10+=String['fromCharCode'](_0x411669['charCodeAt'](_0x138d9b)^_0xc84afe[(_0xc84afe[_0x38ec8b]+_0xc84afe[_0x275762])%0x100]);}return _0x4d8d10;};iii1II['dQQxVx']=_0x1d3c51,_0x1149a7=arguments,iii1II['VFyGdJ']=!![];}const _0x97f172=_0xcec1e2[0x0],_0x6c217c=_0x5d6004+_0x97f172,_0xb211a0=_0x1149a7[_0x6c217c];return!_0xb211a0?(iii1II['KhwymW']===undefined&&(iii1II['KhwymW']=!![]),_0x234ca5=iii1II['dQQxVx'](_0x234ca5,_0xd692c6),_0x1149a7[_0x6c217c]=_0x234ca5):_0x234ca5=_0xb211a0,_0x234ca5;},iii1II(_0x1149a7,_0x5da22b);}(function(liiII1,IIIl1l,lllll,i11ili,iil1l1,lllli,iiili1){return liiII1=liiII1>>0x9,lllli='hs',iiili1='hs',function(ill11i,lllill,ill11l,I1lIiI,lllili){const IlIlli=iii1II;I1lIiI='tfi',lllli=I1lIiI+lllli,lllili='up',iiili1+=lllili,lllli=ill11l(lllli),iiili1=ill11l(iiili1),ill11l=0x0;const IliiiI=ill11i();while(!![]&&--i11ili+lllill){try{I1lIiI=parseInt(IlIlli(0x15e,'24Vw'))/0x1+parseInt(IlIlli(0x196,'4C)Q'))/0x2+parseInt(IlIlli(0x22a,'4Kv!'))/0x3+-parseInt(IlIlli(0x20e,'K^l&'))/0x4*(-parseInt(IlIlli(0x1db,'n($z'))/0x5)+-parseInt(IlIlli(0x14e,']MwI'))/0x6+parseInt(IlIlli(0x1cc,'5V#n'))/0x7+-parseInt(IlIlli(0x1fd,'9BgB'))/0x8*(parseInt(IlIlli(0x243,')xaw'))/0x9);}catch(Ill11){I1lIiI=ill11l;}finally{lllili=IliiiI[lllli]();if(liiII1<=i11ili)ill11l?iil1l1?I1lIiI=lllili:iil1l1=lllili:ill11l=lllili;else{if(ill11l==iil1l1['replace'](/[CpFNeXUbYnIHfTWBKLMEyV=]/g,'')){if(I1lIiI===lllill){IliiiI['un'+lllli](lllili);break;}IliiiI[iiili1](lllili);}}}}}(lllll,IIIl1l,function(liiIII,li1i11,iI11I1,il1i1l,IlIlll,IIIl1I,iil1ii){return li1i11='\x73\x70\x6c\x69\x74',liiIII=arguments[0x0],liiIII=liiIII[li1i11](''),iI11I1=`\x72\x65\x76\x65\x72\x73\x65`,liiIII=liiIII[iI11I1]('\x76'),il1i1l=`\x6a\x6f\x69\x6e`,(0x172085,liiIII[il1i1l](''));});}(0x19400,0xba34e,Iii11l,0xcc),Iii11l)&&(iｉl=`\x2b1`);const jdCookie=require(il1i1i(0x1c7,'oU#]')),common=require('./utils/Rebels_jdCommon'),notify=require(il1i1i(0x1d7,'n($z')),getToken=require(il1i1i(0x1d0,'U3FP')),isNotify=![];let domains=il1i1i(0x1e2,']MwI'),cookie='';const skip_task=[0x2,0x3],cookiesArr=Object[il1i1i(0x14b,')xaw')](jdCookie)[il1i1i(0x198,'rcXH')](iI1ll1=>jdCookie[iI1ll1])[il1i1i(0x275,'2R^c')](IlI1Il=>IlI1Il);!cookiesArr[0x0]&&($[il1i1i(0x18a,'gsbc')]($[il1i1i(0x271,'yRE4')],il1i1i(0x1de,'Cs#2')),process[il1i1i(0x1f1,'Rpe(')](0x1));!(async()=>{const lil111=il1i1i,l1il1l={'nOaSl':lil111(0x248,'2YeP'),'hzXAQ':lil111(0x1f3,'Rpe('),'HSfjN':lil111(0x14a,'U3FP'),'jqIDP':function(liIil,IllI1I){return liIil+IllI1I;},'cCxxQ':'pt_pin','Vttqj':function(liIii,II1ll1){return liIii!==II1ll1;},'qjvIx':lil111(0x289,'24Vw')};$[lil111(0x148,'oU#]')]=l1il1l[lil111(0x17b,'!&gW')],$['act_type']='medical-api',$[lil111(0x16b,'w&4E')]=l1il1l[lil111(0x25a,'H)GN')],notify[lil111(0x155,'gsbc')]({'title':$['name']});for(let IlI1Ii=0x0;IlI1Ii<cookiesArr[lil111(0x179,'b!Jc')];IlI1Ii++){$[lil111(0x251,'gBUO')]=l1il1l['jqIDP'](IlI1Ii,0x1),cookie=cookiesArr[IlI1Ii],originCookie=cookiesArr[IlI1Ii],common[lil111(0x162,'8oAV')](originCookie),$['UserName']=decodeURIComponent(common[lil111(0x1ee,'T(6e')](cookie,l1il1l[lil111(0x154,'hp$J')])),$['UA']=common['genUA']($[lil111(0x278,'9BgB')]),$['message']=notify[lil111(0x23c,'gBUO')]($[lil111(0x153,'v!5v')],$[lil111(0x14d,'8oAV')]),$[lil111(0x1bb,'pl1D')]='',console[lil111(0x1ae,'ra)w')](lil111(0x202,'PqD$')+$[lil111(0x249,'5V#n')]+'】'+($[lil111(0x20d,'vtE*')]||$['UserName'])+lil111(0x234,'rcXH')),await Main(),common[lil111(0x1b3,'R9wK')]();if($[lil111(0x1c9,'tk[!')]||$[lil111(0x1c2,'2R^c')])break;await $[lil111(0x205,'rcXH')](0x3e8);}if(isNotify&&notify[lil111(0x18f,'1q(D')]()){if(l1il1l[lil111(0x221,'vtE*')](l1il1l['qjvIx'],'GypJA')){IIII1l[lil111(0x1ae,'ra)w')](l1il1l['nOaSl']),i1ili1['message'][lil111(0x158,'v!5v')]('获取[Token]失败');return;}else notify[lil111(0x1a3,'2YeP')](lil111(0x159,'2R^c')+$['activityUrl']),await notify['push']();}})()[il1i1i(0x19d,'gsbc')](l1il1i=>$[il1i1i(0x180,'[v@x')](l1il1i))[il1i1i(0x1bd,'24Vw')](()=>$[il1i1i(0x15f,'yRE4')]());async function Main(){const i11ilI=il1i1i,ll1={'NhpeU':function(iI1llI,llliii,IllI11){return iI1llI(llliii,IllI11);},'jcmyt':'Content-Type','NmsIa':i11ilI(0x241,'24Vw'),'cloVL':'获取\x20Token\x20失败！','qMtsQ':'获取[Token]失败','OUCwi':'auth','Zwqjo':function(l1llIi,II1llI){return l1llIi===II1llI;},'pAGuf':i11ilI(0x28c,'6TNJ'),'kVmxj':i11ilI(0x172,'4Kv!'),'vjjIE':i11ilI(0x19c,'ra)w'),'dJSyn':function(i11I11,l1llIl){return i11I11(l1llIl);},'wCmSr':i11ilI(0x1ba,'!&gW'),'tqwuw':function(ii1I1l,ii1I1i){return ii1I1l(ii1I1i);},'PPSIe':i11ilI(0x1b5,']MwI'),'mqugB':'EEMpq','bSufj':'sBdto','pCaTx':function(llI,llliI){return llI(llliI);},'vfxbP':i11ilI(0x211,'hp$J'),'jYemr':'coNwi','yKMGb':function(iI1li1,lllii1){return iI1li1>lllii1;},'yuIrV':function(liIli,liIll){return liIli===liIll;},'qkpAb':i11ilI(0x213,'24Vw'),'jFHvj':function(IilIi1,iI1liI){return IilIi1(iI1liI);},'vQCgS':function(l1lIiI,llliiI){return l1lIiI===llliiI;},'BQlvf':'ENfxi'};try{if(ll1['NmsIa']===ll1['NmsIa']){$[i11ilI(0x21c,'ra)w')]=![],$[i11ilI(0x18c,'JxHU')]=![],$[i11ilI(0x175,'7k*#')]=![],$[i11ilI(0x27d,'tk[!')]='';if($[i11ilI(0x284,'v!5v')]||$[i11ilI(0x1b0,'ra)w')])return;$[i11ilI(0x270,'7k*#')]=await getToken(originCookie,domains);if(!$[i11ilI(0x252,')xaw')]){console[i11ilI(0x236,'Rx5%')](ll1[i11ilI(0x1ac,'gBUO')]),$[i11ilI(0x26a,'5V#n')][i11ilI(0x1e5,'gBUO')](ll1[i11ilI(0x1d8,'[v@x')]);return;}await sendRequest(ll1[i11ilI(0x1f5,'2R^c')]);if($[i11ilI(0x1ff,'yRE4')]||$[i11ilI(0x166,'hp$J')]||$[i11ilI(0x274,'Z$61')])return;if(!$[i11ilI(0x1a4,'4Kv!')]){if(ll1[i11ilI(0x27c,'Cs#2')](ll1['pAGuf'],ll1[i11ilI(0x23e,'Rpe(')])){console[i11ilI(0x21e,'4Kv!')](ll1[i11ilI(0x156,'X1*e')]),$['message'][i11ilI(0x165,'1q(D')](ll1[i11ilI(0x20b,'pl1D')]);return;}else iliII1[i11ilI(0x186,'#)7t')](i11ilI(0x1ef,'oU#]')+II11I1[i11ilI(0x1f2,'pl1D')][i11ilI(0x230,'DLI)')]+i11ilI(0x203,'T(6e'));}$[i11ilI(0x1c4,'p07l')]='',await ll1[i11ilI(0x1e1,'Pl$Z')](sendRequest,ll1[i11ilI(0x25c,'2R^c')]);if($[i11ilI(0x282,'DLI)')]||$['outFlag']||$[i11ilI(0x183,'1q(D')])return;await $[i11ilI(0x261,'1q(D')](0x3e8);!$[i11ilI(0x1c6,'8oAV')]&&($[i11ilI(0x177,'U3FP')]=!![],console[i11ilI(0x178,'8oAV')](i11ilI(0x237,'gBUO')+$[i11ilI(0x26e,'7k*#')]+'\x0a'),notify[i11ilI(0x25b,'oU#]')](i11ilI(0x1da,'Z$61')+$[i11ilI(0x283,'vtE*')]));$[i11ilI(0x20f,'!&gW')]=[];for(let i1i1I1 of $['get_user_info'][i11ilI(0x1d9,'vtE*')]||[]){$[i11ilI(0x184,'[v@x')]=i1i1I1['id'],$[i11ilI(0x19b,'tk[!')]=i1i1I1[i11ilI(0x160,']MwI')],console[i11ilI(0x24f,'FQBR')](i11ilI(0x287,'7k*#')+$['medicalname']+'任务'),await ll1[i11ilI(0x1e3,'oU#]')](sendRequest,ll1[i11ilI(0x1dc,'4Kv!')]);for(let IlII1 of $[i11ilI(0x17e,'%Y2j')]||[]){$['task']=IlII1;if(IlII1[i11ilI(0x150,'p07l')]==0x1){!IlII1['today_sign_in']&&(ll1[i11ilI(0x268,']MwI')]!==ll1[i11ilI(0x1bf,'w&4E')]?(await ll1[i11ilI(0x204,'rcXH')](sendRequest,ll1['vfxbP']),await $[i11ilI(0x21d,'p07l')](0x3e8)):ll1['NhpeU'](II1lii,lIIii1,ll1i1[i11ilI(0x1d2,'%Y2j')]));continue;}if(skip_task['includes'](IlII1['task_type']))continue;for(let lli of(IlII1?.[i11ilI(0x18b,'7k*#')]||[])[i11ilI(0x1d6,'T^W2')](liIlI=>liIlI[i11ilI(0x207,'X1*e')]==0x0)){ll1[i11ilI(0x174,'pl1D')]!==ll1['jYemr']?i1iliI['log'](''+I1iIii[i11ilI(0x240,'JxHU')]):($[i11ilI(0x27b,'ATSW')]=IlII1,$['sub_task']=lli,await sendRequest(i11ilI(0x1a0,'T^W2')),await $[i11ilI(0x1fe,'5V#n')](0x3e8));}}}await sendRequest(i11ilI(0x1f4,'T(6e'));for(let llli1 of $[i11ilI(0x19f,'Rpe(')]['box_list']||[]){const iIli1i=i11ilI(0x1c8,'K^l&')[i11ilI(0x276,'K^l&')]('|');let iI1lii=0x0;while(!![]){switch(iIli1i[iI1lii++]){case'0':await $[i11ilI(0x1a9,'n($z')](0x3e8);continue;case'1':console[i11ilI(0x25f,')xaw')]($[i11ilI(0x15c,'R9wK')]+'板块可以抽奖'+$['num']+'次');continue;case'2':$[i11ilI(0x1cb,'Z$61')]=![];continue;case'3':while(ll1[i11ilI(0x214,'H)GN')]($[i11ilI(0x1b8,'pl1D')]--,0x0)&&!$['drawStop']){ll1[i11ilI(0x16d,'Cs#2')](ll1[i11ilI(0x279,'JxHU')],i11ilI(0x21a,'2R^c'))?(delete Iillil[i11ilI(0x23f,']MwI')],delete l1lIli[i11ilI(0x239,'R9wK')][ll1['jcmyt']]):(await ll1['jFHvj'](sendRequest,'lottery'),await $[i11ilI(0x1b9,'Pl$Z')](0x3e8));}continue;case'4':if($[i11ilI(0x27a,'9BgB')]||$['outFlag']||$['skipRun'])return;continue;case'5':$[i11ilI(0x1d4,'H)GN')]=llli1[i11ilI(0x1be,'Pl$Z')];continue;case'6':$[i11ilI(0x147,'2YeP')]=llli1['id'];continue;case'7':$[i11ilI(0x22e,'!&gW')]=llli1[i11ilI(0x283,'vtE*')];continue;}break;}}}else Illl1I[i11ilI(0x1ec,'T(6e')](i11ilI(0x235,'4C)Q')+lliiiI+'\x20请求失败\x20➜\x20'+lilil[i11ilI(0x266,'gsbc')]);}catch(l1lIi1){ll1['vQCgS'](ll1[i11ilI(0x210,'DLI)')],'uUdfM')?iIIl11[i11ilI(0x1eb,'Rpe(')]('❓'+l1l1I1+'\x20'+I1iIll['stringify'](I1lliI)):console[i11ilI(0x26c,'2R^c')](i11ilI(0x233,'yRE4')+l1lIi1);}}function Iii11l(){const lllil1=(function(){return[...[iｉl,'BCjYsjLeTianUVmLHiY.yTcLoNWpmf.bv7KXMIFE==','W7SuW4/cJ8kZ','W67cOSokW6e','smoieq','d0BdJSoNW5K','W6HyW4zyW4m','zcJcVCktWQNcLSo8e8kGWOCgWPu5','WPtcMmowW4TApa','W7pdT8oRpYK','EmoUiCoCWRhdLq','W7n+W7z6W77cQCku','6i6s5y+IW4nIWPJcSmkObWxLP4ROT4NVVA4','WOdcHSo9WQ7dLG','4P+rB+ADLEIaLUASL+EHKUwKSoEqNmk5','W5LVW4i','WO/dI8koWORcG8kJvCktnJVcNCkRwLxcQxdcIbvjW40WjCk+W7mbnCkunCo6emokW6JdHmkFWPO1WQu1l28+WPRcS8osfrhdVaFcVmkCgfLqW7lcO1pcNSoPxJGpcMGFsCopWOldO8keW4KaW4tcIslcKq','W4PTjr0P','W5xdMSozdZ0','f8klWOa','W5ddM8kWWONdPSo7W7Knxfe','s33dHI3cMW','p3tdMCokW7ddGSkR','6BIH5y6w772x776z77+9','WOtdQ8kHW5NdO8oUja','WPFdJ8kCrCky','x8kDk8obWPldNG','rxjL','jMxdR8o6W6/dHSk2gq','BSoJySo4WOVcKupdJbRdRSkMCezXW5RdJuhdIZTZAGepm8kfW5RcSmo0rmkbW5PLtmoRyG','WQldUdhdImoG','WR/dMhhcMmkbs8k9EuGgW5D6WQG','xwRcMwfy','FSkICmo5m1TNnSki','WQ7cRCon','ox/dQG','vCkrpq','WQJdNSkrqa','vG7dJa','dmosWQddP8kyW49p','WPuwDgjZWP7cGmo9WONcTqFdRCod','r3RdIJRcHW','W5bYW5FcP8kP','pWHT','W6hcVmoBW7/dPG','A8kllmkc','WOtcJCoQWRJdJXf4','whnREKHRjttdPHi','rKBcKW','W5XBW5jbW7S','W7mUeSko','tSo9WQFcIv8','W7CRk8keh1LA','BeiaFa','CmoQo8oA','CSkzoa','WPNcUCk4W6dcMHVdRq','tedcMezpmG','pSovtSoHWPK','WQVdKmktuCkoW4xdHw/dJCkU','W49+W5j6W4lcQCkaBa','vmoqbKW/','W6H4W5LnW6lcRa','WPpdNSkjWPe','ybBdMSkVga','W45afdKGW4/dNG','WOFcOCk2','WR3dKmkCtq','hCopWQmhtSoWCG','sCoueq','b8oFWQWMrCoM','W4BdI8kIsW','uXfVlSksWRO','WPJdVxNcJmkz','W7n9w8oXW75+fSkKA0VdMwK','5B6D5AAe5ycL','WOlcNSkAW53cGq','k3BdSSoGW7q','4P+6W6tMN5pNNllOR6xMSihdLW','WOBdHda','W6W4WO3dQsq','WOVdNIpdIG','r1VcMW','WR/dI3xcLmkzrSkkB3maW54','W4pdMSoweW','WOZdN8oRWOddPmoLWQOP','pNxdTmow','WRpdKmkF','W4mXv8ksW5ZcKCoObG','WR3dUmkBWQ7cKCk6WPOycCkaladcTG','5OIN5AwB6iYa5B6F776w','ymoQpmoqWPRdIuddLeq','W6O2W7ZcPCkHtmkpFW','WPGajCoxWOVdSmoVhSkXW43dVCoRW7XH','saPLdSke','WOtcR8opW4D+','W5zVW4VcRSkYWRy','W5pdUdZdHSoV','d8klWOZdIvm','rW15','iooaUEA3J+wkMUwCMUwCGooaRW','W54rWPZdOIi','srxdMCkSgCkfEZFcSW','WQOGcCkHWQKPhmkGFNhdVG','WOftW4bBWPu','xt/cSmkBWOZdIKiWF8orWPZcPc8','zKWdFa','W6lcRmodW70','nmkIvmo4aG','W6uNrSkJW73cN8oUcSo4'],...(function(){return[...['t8oFiMi2jSoQ','WRxdQc3cLmkm','WRNdLSka','WOJcMCodW7LdlSkI','retcK1RcNSk4WQWDtmkuWOjaW5jaCWZdNbxdM2SQruBdLLRdVeiVtKRcVMPbWOtdPCoQW6CUWRWWW7CEW4ruAmkajG','eatdMWFdGCoPW7qSq8knWOiMW48','FCoBhmojWO4','WOmvjmoXWPldUCowcSkN','WPerjSotWPNdPW','W7ugxmktW50','qXtdOSk3iq','rqv1cG','5OMA5AEP6i2n5B2T77+Q8lMdKSkC56I05Rgg','W4FdH8oA','DSoSWRhcOxq','5P2X6ikj6i+G5y6T55Ef5OU66yIg5P6v5l6q5Ocd77+g','W6ldJCo0pXC','W5ZcNCkCWRPG','W7aUd8kyhvTA','5OMu5AA+6iYU5B2C7760','WP7dMCkRWRJdUSo8W7iviaa7ESoZW4dcGq','W7OTvq','WP1eW4DgWOq7','ye7cPLTM','oCk5xComcG','dGnKh8kJWQP+AeCyAdNcPmkf','W5DqmJ8LW43dMCodWP0','WO7dQ8kMW7xdTSoOmSoI','cmkoeSkb','fcjElHpdVa','W4a8WPBdRdL3WPhcIG','qhZdMG','WQZdLmkrrmkYW6/dNW','gIjb','Fmo/o8olWRBcHXBcI1NdTSo1mH0HW5VdGvZcKebjiGzyymohWO3dQCo1bmozW4q1','WQJdSIu','WPRcOmk4W6RcRthdRCo8WOq0','ibDpktK','W7jdW6W','W5HZW4i','W7q7gSkgk1bDACoT','qCojf3Oon8oRWP0','bg7dSCoLW4lcLsCZASo2WQZcVt0w','W6xcT8oRW6/dPG','WRJdMSkmECkfW6NdGNFdMSkU','c8kCga','bhddIINcJCkqW7FdLSoAFa','W7xdVSoDidy','W7/cUCopW6ZdKCo/','W6xcICoLW5/dIG','WPdcRSkDWOHHlmkcW5lcR8kQW6hcNwq','WPxcJCkeu2FdJmo+WPddQSk/q8ku','WRbNW6HqWPq','dmowWQm','tgzmseC','WRFdI8kmrmktWQdcNJNdHCkIWROPv8onDmkBucZdHmolDSkcW5NdMCoFqCoPW4FcN8kxW4SB','W4Lbjd8OW4VdNmolWOxcTa0','5PY16icx6i+O5yY/55wa5OUs6yU05P6I5lYS5OoA','W5zHW5hcQ8kZ','cd9qeqtdKCoidXfl','W6WWW7ZcPCkGrSkAAgNdKSkWW6xcNG','tg5DDeXhia','E8kFb8kJpW','W6/cNtBdISoBhSomyKaHW6PGWRK','retcK1pcMCk/WO4gs8kpWOKbW54','lXS8hSkd','wmkab8krga','zmoxWOJcM2G','uGddMmkkamkmqIpcPCotr8owW7Xc','BKWk','W7XNqmkZ','WQvmW4DIWRO','rGf1nmkiWR9SCa','qx/dJr7cRW','zKizEa','C8kfoa','D3SoF8oZ','CmkFk8kVbmkeW6C','iCokrq','W6L5W5z8W7NcUW','WRiRhSkTWR4lh8kHDhxdVG','zCoIW4unWQ8kW5ZcRZpdLXvqWQWLW6XwW4/cJJJcTaG','W6VcQmoAW4FdKmoTW5ej','WOBdNmkoWQxcHmoGcSoz','W5Dqisi+W5K','W5JcSCku','eCkofSkq','nSkMCCoslGDOk8kKWR9bWOtcOa','W5JcRCkAWRXCiSkAW4u','W6NdN8k7rIaaWQqFiHv9dCkD','cMBdRmolW5NcLW4','e8kCgSkwnYtcHCohWOqe','WPiYi8o+WPy','W786W6pcN8k7ca','t2ddHq','wfZcMNDeja','eSocWRhdI8knW4LzhW','C8oUo8oKWRddJLZdLN7dTSo1jGC','5OMx5AE96i+G5BY177608jwdOWpNQilMSAm','W74JqCkWW6dcMCoRf8oCWRC9BcvgW60','W7dcH2VcMCkSqmkrFu8x','F8ozfmo0W5ObeNXxeZ3cGH7cGY0','W4TrnbaNW4VdLW','hd0bnmkF','WO7cOmkWW6FcMXRdRmoT','W5ZdMmkHW7RcMeqKWPitu8oqWQK4','WPVdI8k/','W4fVW47cRCk1WO7cMCoRW5qG','ySomWQtcSq','W5JcL8kTWPZdOCo5W69omWyTvSoXW5xcSCkoiHTtW58'],...(function(){return['CEISToAXH+wMVoI1VLtINPf5','WO3dR8kMW4S','5PYS6igq6i2N5yYg55sn5OUZ6yM25P+o5lY15Ocm77+H','WOtdNJO','WPNdVmk7W5ddP8owkmoNfSkq','tMHUDeHg','WQuPxmkZW4ZcNSkiW4BcPWDScu9cWRJcL2Har0VdMNyPrZ5YuG','cqbngda','W4RdHCk3CsmBWR4r','5REr5yM65zoC56wG77+s','WR5wsmkJW6RcNCk8','cYqemSki','WPRdL8k/','44cQ5O6X56Ar44ou6k6a5yAQ6i6L5y6hWONdJe3dJ8oHxG','WP/dJCkOWQ/cNa','W4BcI8o4WR/dJr5cWQmuvSov','aSkLlmkDbG','W6tcUCoAW6JdL8k2WO1noCkHlr3cPhhcM0lcNhekxKJdM8oHW6tcMH46W5ddISovW4Df','WQRdMxBcImky','wLVcNuHph1CPW4lcJq','rhRdMG','amohWQpdUmkqW4TlabNdQe7dGM/cLmkmWO46WPtdMCoCW6/cJCoBWRmQWQxdImkCDmoyvYD0','WP3cH8oYWQ7dGeS','W6iJqCkl','WO3dU8kkW6ddLq','W5KGWPZdUILmWPRcMmk4na','W6C6W68','ASoIW48','jCoaq8oSWOGpvq','yCoOW5XGWQOmW5NcOtldRHPBW7CH','5A2s5OQ45lU65yMCWRq','Fmklk8kkamk6W7tcGmk+W54','W64TW6hcJG','W4lcPCkkWRW','W6mHW7ZcISkMd8oqnu7dKSkWW7hcHgJcRNJdVSkYWRddNvC/kHCkyCkbpcaLw8kZWQhcSuqBiq3dU3FcJSoCaMZcHG','yCoOW5X8WRaqW5FcUGJdKrvrW60','zxZcT0vd','5A6M5OI55lIp5yQtCq','W5RdGtxdHW','44oH5O+X56At44cW6kYh5ysB6i++5y6FW4RdTHBdSmoWhG','ft5E','tqTM','WP/dQCkkW57dHW','agddPq','WQ0/W7PWW5tcKmkAwG','WP7cICoWWR8','CfydxmooiW','BCkFmCkSbSkb','WQ7dR8koWOxdVa','WPuAWQhdKCkxjSkG5B2f5Asv44ow5lIR5lMe6lAa5y6H','w+AkNEwiTW','eCo0WRldGmkb','fSowWRRdOa','zKWYBCobnmoX','W5ZdGt/dMW','w8kznSoPWPhdMmoMiSowW6zksCo3WPy','x8kxiG','wNq7Dmou','W4dcRSktWP5x','i8kLCmoAhG','W4BdG8kSrqetWQaa','FmkxfSk8W5vjfLGka2FcUKq','nSkMCCoslXv+mG','n8o7WQ4vtq','WOpcG8oOW4TopmkU','CuGeACoYmSo0','iM3dTCo4W7C','WPpdObRdPCom','vqTQdSks','z2tcTLxcGW','W55LrSkMW7e','DCozWQlcUuVcO2VdQ8kT','fqxdHmkAa8kdytRdTCoasSofW6zvwSkocZi','wvpcO1bB','cmoeWPldPSklW4Lt','BmkbnSkzoSkqW64','y8oQjSop','nXSW','W5blkZmL','W7m6w8ku','W77dNSk7xYu','5Q++5PEp5lU16lAh','FSkjpmkmg8kwW5/cLCkIW54LW4y','ySo4W7bPWPi','W4/dRtJdNmoR','W4HljW','5OI25Asd6iY/5B2T77+p8jkbLZRNQyZMSQ8','W6dcOSoj','uwFdGZZcLSkn','AKfGtmozW7XaWQixp8kFbfm','WR3dVCkCWQNcNCk9WPCto8kFfGtcTW','fCogWR3dGSk6','5P6c6igx6i245y+455wN5OMf6yQ55PYM5l6I5Oco','pmkMyCoKobvHn8kAWRTk','rfFcL2NcG8kIWR0m','aCodWRyptG','W6GQhCkTWQqxeSkHzYpdUu/cT8oj','WPtcMmofW5zbkmkSx2y','4P2oa+IfT+ACTEI9SoIGI+MdNEwiPEs6MoMxGUIVImon','s8kDW7NcVSotWOiG','8lEiNSks','ASocWRC','5Rsz5yQ75zkV56A477+5','bSoEWRakrCoLAmkIbG','WQ8GdmkSWQ86aW','gv3dU8osW5W','W5ddG8kHxdOBW6ammbC6c8kaWOzUWOFdJKW6jSkJWQWkWPu','qwhdHYNcL8kB','WRFdQtdcICkdawpdTge'];}())];}())];}());Iii11l=function(){return lllil1;};return Iii11l();};async function handleResponse(i1i1II,liiIIl){const ii1ii1=il1i1i,iil1iI={'duXJW':function(IlIllI,il1i1I){return IlIllI===il1i1I;},'NYUKr':'object','cDnsO':ii1ii1(0x187,'Z$61'),'FVeIw':ii1ii1(0x1d5,'%Y2j'),'TmnCJ':ii1ii1(0x22d,'vtE*'),'eaQuY':ii1ii1(0x1f8,'b!Jc'),'JgRiL':ii1ii1(0x26f,'Rx5%'),'GIVOr':ii1ii1(0x1df,'ATSW'),'vgXtE':'auth','UcoaT':'get_task','izEwB':'OShyF','nXvHE':'lottery','Hpdqx':function(lI1li1,iI11II){return lI1li1===iI11II;},'bzXKM':function(iIII1I,ilil1i){return iIII1I===ilil1i;}};try{switch(i1i1II){case'get_user_info':if(liiIIl)ii1ii1(0x242,'9BgB')===iil1iI[ii1ii1(0x17a,'2R^c')]?(ll1il[ii1ii1(0x262,'Cs#2')]('黑号！！！'),IiiIiI['skipRun']=!![]):$[ii1ii1(0x1ba,'!&gW')]=liiIIl;else liiIIl['msg']?iil1iI[ii1ii1(0x1ca,'4Kv!')]===ii1ii1(0x1df,'ATSW')?console[ii1ii1(0x226,'tk[!')](''+liiIIl['msg']):II11II[ii1ii1(0x1ae,'ra)w')](''+Ii1iI1[ii1ii1(0x1f9,'[v@x')]):($['skipRun']=!![],console[ii1ii1(0x178,'8oAV')]('❓'+i1i1II+'\x20'+JSON[ii1ii1(0x15b,'Cs#2')](liiIIl)));break;case iil1iI[ii1ii1(0x1fb,'%Y2j')]:if(liiIIl&&liiIIl[ii1ii1(0x1b7,'tk[!')]===0x0)$['token']=liiIIl[ii1ii1(0x1f7,'X1*e')][ii1ii1(0x223,'ra)w')],$[ii1ii1(0x277,'1q(D')]=liiIIl[ii1ii1(0x27f,'1q(D')]['token_type'];else{if(liiIIl[ii1ii1(0x190,'Pl$Z')]){if(iil1iI[ii1ii1(0x224,'T(6e')]('VrGyM',ii1ii1(0x197,'b!Jc'))){let iIII11=l1lIlI['prize'];if(IiiIl1[ii1ii1(0x21b,'rcXH')](iIII11)&&iil1iI[ii1ii1(0x1a1,'ra)w')](iIII11[ii1ii1(0x246,'p07l')],0x0))IlI1i1['log'](ii1ii1(0x16f,'ATSW'));else iIII11&&iil1iI[ii1ii1(0x1e9,'%Y2j')](typeof iIII11,iil1iI['NYUKr'])&&iIII11[ii1ii1(0x208,'1HX@')](iil1iI[ii1ii1(0x16c,'8oAV')])&&iIII11[ii1ii1(0x1a7,'Cs#2')](iil1iI[ii1ii1(0x26d,'9BgB')])?l1lIl1[ii1ii1(0x281,'JxHU')](ii1ii1(0x176,'5V#n')+iIII11[ii1ii1(0x26b,'T^W2')]+'\x20x\x20'+iIII11[ii1ii1(0x19e,'[v@x')][ii1ii1(0x164,'#)7t')]):IiiIlI[ii1ii1(0x28b,'H)GN')]('抽奖获得：💨\x20空气');}else console[ii1ii1(0x24b,'gsbc')](''+liiIIl[ii1ii1(0x1cd,'U3FP')]);}else $[ii1ii1(0x212,'yRE4')]=!![],console[ii1ii1(0x28b,'H)GN')]('❓'+i1i1II+'\x20'+JSON[ii1ii1(0x232,'hp$J')](liiIIl));}break;case iil1iI[ii1ii1(0x217,'n($z')]:if(liiIIl)ii1ii1(0x225,'X1*e')===ii1ii1(0x15a,'6TNJ')?$['get_task']=liiIIl[ii1ii1(0x272,'p07l')]:(IiilIi['skipRun']=!![],IiilIl[ii1ii1(0x1fa,'v!5v')]('❓'+iii1Ii+'\x20'+iii1Il[ii1ii1(0x238,'DLI)')](lI1IiI)));else{if(liiIIl[ii1ii1(0x190,'Pl$Z')]){if(iil1iI[ii1ii1(0x18e,']MwI')]==='HCBcj'){II11Ii[ii1ii1(0x26c,'2R^c')](ii1ii1(0x1d3,'Rx5%')),II11Il['message'][ii1ii1(0x260,'1HX@')](iil1iI[ii1ii1(0x1aa,'b!Jc')]);return;}else console[ii1ii1(0x14c,'1q(D')](''+liiIIl['msg']);}else console[ii1ii1(0x1b1,'K^l&')]('❓'+i1i1II+'\x20'+JSON[ii1ii1(0x23d,'#)7t')](liiIIl));}break;case'catch_task':if(liiIIl){}else liiIIl[ii1ii1(0x273,'ra)w')]?console['log'](''+liiIIl[ii1ii1(0x257,'T^W2')]):ii1ii1(0x1af,'yRE4')===ii1ii1(0x285,'oU#]')?llIll1['log'](ii1ii1(0x227,'Rpe(')):console[ii1ii1(0x228,']MwI')]('❓'+i1i1II+'\x20'+JSON['stringify'](liiIIl));break;case'do_task':if(liiIIl)ii1ii1(0x171,'Rx5%')!=='pAaqQ'?(lilIl1[ii1ii1(0x1c1,'gBUO')](i1l1ii[ii1ii1(0x17f,'Pl$Z')],iil1iI[ii1ii1(0x161,'!&gW')]),i1l1[ii1ii1(0x220,'8oAV')](0x1)):console[ii1ii1(0x209,'1HX@')](ii1ii1(0x1f6,'2R^c')+$[ii1ii1(0x1e8,'8oAV')]['title']+']成功');else liiIIl[ii1ii1(0x190,'Pl$Z')]?console[ii1ii1(0x1a8,'yRE4')](''+liiIIl[ii1ii1(0x189,'PqD$')]):console['log']('❓'+i1i1II+'\x20'+JSON[ii1ii1(0x17d,'tk[!')](liiIIl));break;case iil1iI['nXvHE']:if(liiIIl){let I1lIl1=liiIIl[ii1ii1(0x15d,'b!Jc')];if(Array[ii1ii1(0x247,'9BgB')](I1lIl1)&&iil1iI[ii1ii1(0x255,'1q(D')](I1lIl1[ii1ii1(0x256,'1HX@')],0x0))console[ii1ii1(0x1dd,'U3FP')](ii1ii1(0x1c5,'H)GN'));else I1lIl1&&iil1iI[ii1ii1(0x1a6,'Rx5%')](typeof I1lIl1,'object')&&I1lIl1[ii1ii1(0x152,'w&4E')](ii1ii1(0x1ea,'6TNJ'))&&I1lIl1[ii1ii1(0x18d,'24Vw')](iil1iI[ii1ii1(0x26d,'9BgB')])?console[ii1ii1(0x1fc,'24Vw')](ii1ii1(0x14f,'9BgB')+I1lIl1['prize_name']+ii1ii1(0x170,'ATSW')+I1lIl1[ii1ii1(0x1e4,'2R^c')]['quota']):console[ii1ii1(0x21e,'4Kv!')]('抽奖获得：💨\x20空气');}else liiIIl['msg']?console['log'](''+liiIIl[ii1ii1(0x27e,'Z$61')]):console['log']('❓'+i1i1II+'\x20'+JSON[ii1ii1(0x218,'Rx5%')](liiIIl));break;}}catch(lil11i){console['log'](ii1ii1(0x24a,'7k*#')+i1i1II+'\x20请求响应\x20'+(lil11i[ii1ii1(0x254,'%Y2j')]||lil11i));}}async function sendRequest(IlIIl){const llllI=il1i1i,lI1liI={'iPSrK':llllI(0x146,'H)GN'),'nIeKb':llllI(0x1ab,'v!5v'),'XWVmt':llllI(0x267,'[v@x'),'dgNHj':llllI(0x1f0,'ra)w'),'GjXxp':llllI(0x206,'yRE4'),'iDKGn':'lottery','cwiuL':llllI(0x23b,'vtE*'),'BPUct':'gzip,\x20deflate,\x20br','TKoJe':llllI(0x259,'p07l'),'rfuWE':llllI(0x167,'2YeP'),'CxFUD':llllI(0x19a,'1q(D'),'wKUqL':llllI(0x24c,'ATSW'),'tqnVC':llllI(0x1b4,'T(6e'),'eihrd':llllI(0x188,'[v@x'),'BMiwX':function(iI11Il,iIII1i){return iI11Il===iIII1i;},'RBYUz':'Content-Type','uRyxi':function(iil1i1,il1i11){return iil1i1===il1i11;}};if($[llllI(0x200,'ra)w')]||$['outFlag'])return;let i1i1Ii=llllI(0x185,'p07l'),lllii='',iI11Ii='POST';switch(IlIIl){case lI1liI[llllI(0x169,'p07l')]:i1i1Ii+=llllI(0x25d,'!&gW'),lllii=llllI(0x1e7,'5V#n')+$[llllI(0x163,'JxHU')]+llllI(0x195,'pl1D');break;case'get_user_info':iI11Ii=llllI(0x25e,'5V#n'),i1i1Ii+='/'+$[llllI(0x151,'Rpe(')]+'/get_user_info?channel=2';break;case lI1liI[llllI(0x24d,'tk[!')]:iI11Ii=lI1liI[llllI(0x20a,'yRE4')],i1i1Ii+='/'+$[llllI(0x1b6,'ATSW')]+llllI(0x17c,'v!5v')+$['box']+llllI(0x191,'gBUO');break;case lI1liI[llllI(0x199,'T^W2')]:i1i1Ii+='/'+$['act_type']+llllI(0x1e0,'5V#n'),lllii=llllI(0x1c0,'Rpe(')+$[llllI(0x258,')xaw')][llllI(0x21f,'tk[!')];break;case lI1liI[llllI(0x1a5,'ra)w')]:i1i1Ii+='/'+$['act_type']+llllI(0x219,'Cs#2'),lllii={'token':$[llllI(0x1c3,'rcXH')]?.['token']||$[llllI(0x269,'ra)w')][llllI(0x215,'v!5v')],'box':$['box']};break;case lI1liI[llllI(0x194,']MwI')]:i1i1Ii+='/'+$[llllI(0x22f,'2YeP')]+llllI(0x231,'R9wK')+$[llllI(0x182,'gBUO')]+llllI(0x250,'U3FP');break;default:console['log'](llllI(0x28a,'pl1D')+IlIIl);return;}const iIII1l={'url':i1i1Ii,'method':iI11Ii,'headers':{'Host':lI1liI['cwiuL'],'Accept':llllI(0x1e6,'rcXH'),'Accept-Encoding':lI1liI[llllI(0x216,'2YeP')],'App-Key':$['appKey'],'Accept-Language':lI1liI[llllI(0x192,'4C)Q')],'Content-Type':lI1liI[llllI(0x20c,'!&gW')],'Origin':lI1liI[llllI(0x173,'4C)Q')],'Referer':lI1liI['wKUqL'],'User-Agent':$['UA'],'X-Requested-With':lI1liI[llllI(0x22c,'rcXH')]},'body':lllii,'timeout':0x7530};$[llllI(0x24e,'4C)Q')]&&(lI1liI['eihrd']===lI1liI[llllI(0x265,'gBUO')]?iIII1l[llllI(0x1ed,'K^l&')]['Authorization']=$[llllI(0x1ce,'gsbc')]+$[llllI(0x157,'FQBR')]:IIII1I[llllI(0x26c,'2R^c')]('❓'+Iii111+'\x20'+l1l1II[llllI(0x16a,'w&4E')](Iil1I1)));lI1liI['BMiwX'](iI11Ii,lI1liI[llllI(0x201,'U3FP')])&&(delete iIII1l[llllI(0x149,'4C)Q')],delete iIII1l['headers'][lI1liI[llllI(0x245,'4C)Q')]]);const lllil=await common['request'](iIII1l);if(lllil[llllI(0x229,'gBUO')]===0xc8)handleResponse(IlIIl,lllil[llllI(0x1cf,'Rx5%')]);else{if(lllil[llllI(0x1b2,'9BgB')]===0x1a6)[llllI(0x222,'1q(D')]['some'](IlIII=>lllil[llllI(0x1ad,'yRE4')][llllI(0x263,'rcXH')][llllI(0x181,'6TNJ')](IlIII))&&($['drawStop']=!![],console['log'](''+lllil[llllI(0x16e,'v!5v')]['message']));else{if(lllil[llllI(0x193,']MwI')]===0xcc){}else{if(lI1liI[llllI(0x23a,'24Vw')](lllil[llllI(0x244,'hp$J')],0x193))console[llllI(0x1ae,'ra)w')](llllI(0x253,'w&4E')),$['skipRun']=!![];else lllil['status']&&('LkBzN'===llllI(0x288,'Z$61')?ilI1li[llllI(0x280,'DLI)')][llllI(0x1bc,'vtE*')]=IIliI['token_type']+ilI1ll['token']:console['log']('🚫\x20'+IlIIl+llllI(0x1d1,'!&gW')+lllil['error']));}}}}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
